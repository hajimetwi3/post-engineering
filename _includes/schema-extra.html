{%- comment -%}
Extra JSON-LD (additive) for GitHub Pages + jekyll-seo-tag.
- Do NOT emit WebSite (already emitted by jekyll-seo-tag).
- Emit minimal, page-appropriate types:
  - home: WebPage + TechArticle(DOI)
  - docs/ja: WebPage (ja-JP) + about DOI
  - docs/en: WebPage (en-US) + about DOI
  - news: CollectionPage
  - hello-seed: Article
  - else: nothing (keep it minimal to avoid unintended effects)
{%- endcomment -%}

{%- assign u = page.url | default: "" -%}

{%- if u == "/" or u == "/index.html" -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "@id": "{{ '/' | absolute_url }}#webpage",
      "url": "{{ '/' | absolute_url }}",
      "name": "{{ page.title | default: site.title | escape }}",
      "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | default: site.description | escape }}",
      "mainEntity": { "@id": "https://doi.org/10.5281/zenodo.17896136" }
    },
    {
      "@type": "TechArticle",
      "@id": "https://doi.org/10.5281/zenodo.17896136",
      "identifier": "https://doi.org/10.5281/zenodo.17896136",
      "headline": "Post Engineering for AI (PE4AI)",
      "image": ["{{ '/docs/assets/images/pe4ai-seed.jpg' | absolute_url }}"],
      "author": {
        "@type": "Person",
        "name": "Hajime Tsui (ついはじめ)",
        "url": "https://x.com/hajimetwi3",
        "sameAs": ["https://x.com/hajimetwi3"]
      },
      "publisher": {
        "@type": "Organization",
        "name": "Post Engineering for AI Project"
      }
    }
  ]
}
</script>

{%- elsif u contains "/docs/ja/" -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "{{ page.url | absolute_url }}#webpage",
  "url": "{{ page.url | absolute_url }}",
  "name": "{{ page.title | default: site.title | escape }}",
  "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | default: site.description | escape }}",
  "inLanguage": "ja-JP",
  "about": { "@id": "https://doi.org/10.5281/zenodo.17896136" }
}
</script>

{%- elsif u contains "/docs/en/" -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "{{ page.url | absolute_url }}#webpage",
  "url": "{{ page.url | absolute_url }}",
  "name": "{{ page.title | default: site.title | escape }}",
  "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | default: site.description | escape }}",
  "inLanguage": "en-US",
  "about": { "@id": "https://doi.org/10.5281/zenodo.17896136" }
}
</script>

{%- elsif u == "/news.html" -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "@id": "{{ page.url | absolute_url }}#collection",
  "url": "{{ page.url | absolute_url }}",
  "name": "{{ page.title | default: 'News' | escape }}",
  "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | default: site.description | escape }}"
}
</script>

{%- elsif u == "/hello-seed.html" -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "@id": "{{ page.url | absolute_url }}#article",
  "url": "{{ page.url | absolute_url }}",
  "headline": "{{ page.title | default: site.title | escape }}",
  "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | default: site.description | escape }}",
  "author": {
    "@type": "Person",
    "name": "Hajime Tsui (ついはじめ)",
    "url": "https://x.com/hajimetwi3",
    "sameAs": ["https://x.com/hajimetwi3"]
  },
  "publisher": {
    "@type": "Organization",
    "name": "Post Engineering for AI Project"
  }
}
</script>
{%- endif -%}
